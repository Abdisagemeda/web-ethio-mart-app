(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Ao8N:function(t,o,e){"use strict";e.r(o),e.d(o,"ProductsModule",function(){return bt});var i=e("Xa2L"),n=e("/1cH"),l=e("iadO"),c=e("1jcm"),r=e("d3UM"),a=e("NFeN"),s=e("qFsG"),d=e("0IaG"),u=e("V5BG"),f=e("Q4Mo"),b=e("jIHw"),p=e("7kUa"),h=e("3Pt+"),m=e("rEr+"),g=e("PCNd"),v=e("ofXK"),C=e("mrSG"),y=e("4ZtF"),w=e("nnAt"),k=e("fXoL"),V=e("/zas"),W=e("UbJi"),O=e("otk6"),S=e("kmnG"),D=e("FKr1"),I=e("xivw");function Q(t,o){if(1&t&&(k.Wb(0,"mat-option",23),k.Qc(1),k.Vb()),2&t){const t=o.$implicit;k.oc("value",t.name),k.Cb(1),k.Sc(" ",t.name," ")}}function x(t,o){1&t&&(k.Wb(0,"mat-hint"),k.Qc(1,"changing choices you will lose your data! "),k.Vb())}function N(t,o){if(1&t&&(k.Wb(0,"mat-error",24),k.Qc(1),k.Vb()),2&t){const t=k.hc();k.Cb(1),k.Rc(t.displayMessage.name)}}function j(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function E(t,o){if(1&t){const t=k.Xb();k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,j,2,0,"span",11),k.Vb(),k.Wb(4,"input",28),k.ec("input",function(o){return k.Ec(t),k.hc(2).keyDown(o,"email")})("keydown",function(o){return k.Ec(t),k.hc(2).keyDown(o,"email")}),k.Vb(),k.Vb()}if(2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name)}}function A(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function M(t,o){if(1&t){const t=k.Xb();k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,A,2,0,"span",11),k.Vb(),k.Wb(4,"input",29),k.ec("input",function(o){return k.Ec(t),k.hc(2).keyDown(o,"int")})("keydown",function(o){return k.Ec(t),k.hc(2).keyDown(o,"int")}),k.Vb(),k.Vb()}if(2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name)}}function _(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function B(t,o){if(1&t){const t=k.Xb();k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,_,2,0,"span",11),k.Vb(),k.Wb(4,"input",29),k.ec("input",function(o){return k.Ec(t),k.hc(2).keyDown(o,"price")})("keydown",function(o){return k.Ec(t),k.hc(2).keyDown(o,"price")}),k.Vb(),k.Vb()}if(2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name)}}function F(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function q(t,o){if(1&t){const t=k.Xb();k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,F,2,0,"span",11),k.Vb(),k.Wb(4,"input",28),k.ec("input",function(o){return k.Ec(t),k.hc(2).keyDown(o,"date")})("keydown",function(o){return k.Ec(t),k.hc(2).keyDown(o,"date")}),k.Vb(),k.Vb()}if(2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name)}}function P(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function G(t,o){if(1&t){const t=k.Xb();k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,P,2,0,"span",11),k.Vb(),k.Wb(4,"input",28),k.ec("input",function(o){return k.Ec(t),k.hc(2).keyDown(o,"phone")})("keydown",function(o){return k.Ec(t),k.hc(2).keyDown(o,"phone")}),k.Vb(),k.Vb()}if(2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name)}}function X(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function R(t,o){if(1&t){const t=k.Xb();k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,X,2,0,"span",11),k.Vb(),k.Wb(4,"input",28),k.ec("input",function(o){return k.Ec(t),k.hc(2).keyDown(o,"text")})("keydown",function(o){return k.Ec(t),k.hc(2).keyDown(o,"text")}),k.Vb(),k.Vb()}if(2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name)}}function U(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function $(t,o){if(1&t){const t=k.Xb();k.Wb(0,"textarea",31),k.ec("input",function(o){return k.Ec(t),k.hc(3).keyDown(o,"text")})("keydown",function(o){return k.Ec(t),k.hc(3).keyDown(o,"text")}),k.Vb()}if(2&t){const t=k.hc(2).index,o=k.hc();k.oc("formControlName",o.fieldControls[t].name)}}function K(t,o){if(1&t&&(k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,U,2,0,"span",11),k.Vb(),k.Oc(4,$,1,1,"textarea",30),k.Vb()),2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("ngIf",""===o.fieldControls[t].type)}}function T(t,o){1&t&&(k.Wb(0,"span",24),k.Qc(1,"*"),k.Vb())}function H(t,o){if(1&t&&(k.Wb(0,"mat-option",23),k.Wb(1,"span"),k.Qc(2),k.Vb(),k.Vb()),2&t){const t=o.$implicit;k.oc("value",t.name),k.Cb(2),k.Rc(t.name)}}function J(t,o){if(1&t&&(k.Wb(0,"mat-form-field",7),k.Wb(1,"mat-label",27),k.Qc(2),k.Oc(3,T,2,0,"span",11),k.Vb(),k.Wb(4,"mat-select",32),k.Oc(5,H,3,2,"mat-option",9),k.Vb(),k.Vb()),2&t){const t=k.hc().index,o=k.hc();k.Cb(2),k.Sc(" ",o.fieldControls[t].label," "),k.Cb(1),k.oc("ngIf",o.fieldControls[t].required),k.Cb(1),k.oc("formControlName",o.fieldControls[t].name),k.Cb(1),k.oc("ngForOf",null==o.fieldControls[t]?null:o.fieldControls[t].options)}}function L(t,o){if(1&t){const t=k.Xb();k.Wb(0,"div",7),k.Wb(1,"app-file-upload-template",33),k.ec("fileDropped",function(o){return k.Ec(t),k.hc(2).getFile(o)}),k.Vb(),k.Vb()}if(2&t){const t=k.hc(2);k.Cb(1),k.oc("uploadedFile",t.image)}}function z(t,o){if(1&t&&(k.Wb(0,"div",25),k.Oc(1,E,5,3,"mat-form-field",26),k.Oc(2,M,5,3,"mat-form-field",26),k.Oc(3,B,5,3,"mat-form-field",26),k.Oc(4,q,5,3,"mat-form-field",26),k.Oc(5,G,5,3,"mat-form-field",26),k.Oc(6,R,5,3,"mat-form-field",26),k.Oc(7,K,5,3,"mat-form-field",26),k.Oc(8,J,6,4,"mat-form-field",26),k.Oc(9,L,2,1,"div",26),k.Vb()),2&t){const t=o.index,e=k.hc();k.oc("formGroupName",0),k.Cb(1),k.oc("ngIf","email"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","number"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","price"===e.fieldControls[t].type||"float"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","date"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","phone"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","text"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","textarea"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","dropdown"===e.fieldControls[t].type),k.Cb(1),k.oc("ngIf","file"===e.fieldControls[t].type)}}const Z=function(){return{standalone:!0}};let Y=(()=>{class t{constructor(t,o,e,i,n){var l,c,r,a,s,d,u,f,b,p,m,g,v;this.fb=t,this.sessionQuery=o,this.auth=e,this.fun=i,this.config=n,this.formSubmit=new k.o,this.formClose=new k.o,this.isPublished=!1,this.fieldControls=[],this.selectedCategory=[],this.file=[],this.displayMessage={},this.category=null===(l=this.config.lookupData)||void 0===l?void 0:l.category,this.image=Object(y.j)(null===(c=this.config.formData)||void 0===c?void 0:c.image)?null===(r=this.config.formData)||void 0===r?void 0:r.image:Object(y.n)(null===(a=this.config.formData)||void 0===a?void 0:a.image)?[null===(s=this.config.formData)||void 0===s?void 0:s.image]:[],this.isPublished=(null===(d=this.config.formData)||void 0===d?void 0:d.status)||!0,this.id=null===(u=this.config.formData)||void 0===u?void 0:u.id,this.category.subscribe(t=>{var o;this.selectedCategory=t,null!==this.id&&this.change(null===(o=this.config.formData)||void 0===o?void 0:o.category)}),this.form=this.fb.group({id:this.id,additional_fields:this.fb.group({fields:this.fb.array([new h.g({})])}),category:[null===(f=this.config.formData)||void 0===f?void 0:f.category,h.v.required],status:[this.isPublished,h.v.required],user:(null===(b=this.config.formData)||void 0===b?void 0:b.user)||(null===(m=null===(p=this.sessionQuery)||void 0===p?void 0:p.user)||void 0===m?void 0:m.name),uid:(null===(g=this.config.formData)||void 0===g?void 0:g.uid)||null,created_at:null===(v=this.config.formData)||void 0===v?void 0:v.created_at}),this.validationMessages={category:{required:"field is required."}},this.genericValidator=new w.a(this.validationMessages)}get fields(){return this.form.controls.additional_fields.get("fields")}ngOnInit(){this.auth.user.subscribe(t=>{this.uid=t.uid}),this.form.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.form))}blur(){this.displayMessage=this.genericValidator.processMessages(this.form)}keyDown(t,o){return t.key?this.fun.allowedKey(t.key,o):(t.target.value=this.fun.removeNotAllowedKey(t.target.value,o),!0)}change(t){var o,e;const i=null===(o=this.selectedCategory.filter(o=>o.name===t)[0])||void 0===o?void 0:o.fields;this.detail=null===(e=this.selectedCategory.filter(o=>o.name===t)[0])||void 0===e?void 0:e.Details,this.fields.removeAt(0),this.fieldControls=[];const n=new h.g({});i&&i.forEach(t=>{var o;const e=[];"email"===t.type&&e.push(h.v.email),t.required&&e.push(h.v.required);const i=e.length>0?[...e]:null;this.fieldControls.push(t),n.addControl(t.name,this.fb.control((null===(o=this.config)||void 0===o?void 0:o.formData[t.name])||t.default,i))}),this.fields.push(n)}getFile(t){this.file=(null==t?void 0:t.upload.length)>0?null==t?void 0:t.upload:[]}onSubmit(){const t=this.fieldControls.filter(t=>"file"===t.type);t.length>0&&this.file.length>0&&(this.form.value.additional_fields.fields[0][t[0].name]=this.file);const o=Object(C.__rest)(this.form.value,[]),e=Object.assign({},o.additional_fields.fields[0]),i=Object(C.__rest)(e,[]);delete o.additional_fields;const n=Object.assign(Object.assign(Object.assign({},i),o),{uid:null===o.uid?this.uid:o.uid,Details:this.detail||null,status:this.isPublished});this.formSubmit.emit(n)}onCancel(){this.formClose.emit()}}return t.\u0275fac=function(o){return new(o||t)(k.Qb(h.e),k.Qb(V.a),k.Qb(W.a),k.Qb(O.a),k.Qb(d.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-product-form"]],outputs:{formSubmit:"formSubmit",formClose:"formClose"},decls:36,vars:12,consts:[["autocomplete","off",3,"formGroup","submit"],["mat-dialog-title","",1,"p-dialog-header","p-d-flex","p-jc-lg-between",2,"padding","0.2re 0.3rem"],[1,"p-dialog-title","capitalize"],["pButton","","pRipple","","icon","pi pi-times",1,"shadow-none","p-button-rounded","p-button-plain","p-button-text","p-mr-1",3,"click"],["mat-dialog-content","",1,"p-dialog-content"],[1,"p-grid"],[1,"p-col-12"],[1,"full-width"],["formControlName","category",3,"closed","valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","error",4,"ngIf"],["formGroupName","additional_fields",1,"p-col-12"],["formArrayName","fields"],[3,"formGroupName",4,"ngFor","ngForOf"],["color","primary","forControlName","status",1,"example-section",3,"ngModel","ngModelOptions","ngModelChange"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"],[3,"value"],[1,"error"],[3,"formGroupName"],["class","full-width",4,"ngIf"],[1,"capitalize"],["matInput","","type","text","value","",3,"formControlName","input","keydown"],["matInput","","type","number","value","",3,"formControlName","input","keydown"],["matInput","","rows","2","type","text","value","",3,"formControlName","input","keydown",4,"ngIf"],["matInput","","rows","2","type","text","value","",3,"formControlName","input","keydown"],[3,"formControlName"],[3,"uploadedFile","fileDropped"]],template:function(t,o){1&t&&(k.Wb(0,"form",0),k.ec("submit",function(){return o.onSubmit()}),k.Wb(1,"div",1),k.Wb(2,"div",2),k.Qc(3),k.Vb(),k.Wb(4,"button",3),k.ec("click",function(){return o.onCancel()}),k.Vb(),k.Vb(),k.Wb(5,"div",4),k.Wb(6,"div",5),k.Wb(7,"div",6),k.Wb(8,"mat-form-field",7),k.Wb(9,"mat-label"),k.Qc(10,"Category"),k.Vb(),k.Wb(11,"mat-select",8),k.ec("closed",function(){return o.blur()})("valueChange",function(t){return o.change(t)}),k.Oc(12,Q,2,2,"mat-option",9),k.ic(13,"async"),k.Vb(),k.Oc(14,x,2,0,"mat-hint",10),k.Oc(15,N,2,1,"mat-error",11),k.Vb(),k.Vb(),k.Wb(16,"div",12),k.Wb(17,"div",13),k.Oc(18,z,10,10,"div",14),k.Vb(),k.Vb(),k.Wb(19,"mat-slide-toggle",15),k.ec("ngModelChange",function(t){return o.isPublished=t}),k.Wb(20,"span"),k.Qc(21,"Status"),k.Vb(),k.Rb(22,"br"),k.Wb(23,"mat-hint"),k.Qc(24,"block or allow product from displaying"),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Wb(25,"div",16),k.Wb(26,"button",17),k.ec("click",function(){return o.onCancel()}),k.Rb(27,"span",18),k.Wb(28,"span",19),k.Qc(29,"Cancel"),k.Vb(),k.Rb(30,"span",20),k.Vb(),k.Wb(31,"button",21),k.Rb(32,"span",22),k.Wb(33,"span",19),k.Qc(34,"Save"),k.Vb(),k.Rb(35,"span",20),k.Vb(),k.Vb(),k.Vb()),2&t&&(k.oc("formGroup",o.form),k.Cb(3),k.Rc(o.config.title),k.Cb(9),k.oc("ngForOf",k.jc(13,9,o.category)),k.Cb(2),k.oc("ngIf",null===o.id),k.Cb(1),k.oc("ngIf",o.displayMessage.name),k.Cb(3),k.oc("ngForOf",o.fieldControls),k.Cb(1),k.oc("ngModel",o.isPublished)("ngModelOptions",k.rc(11,Z)),k.Cb(12),k.oc("disabled",!o.form.valid))},directives:[h.w,h.q,h.h,d.g,b.b,f.a,d.e,S.c,S.g,r.a,h.p,h.f,v.l,v.m,h.i,h.d,c.a,h.s,S.f,d.c,D.h,S.b,s.b,h.c,h.t,I.a],pipes:[v.b],styles:[".example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}"]}),t})();var tt=e("12jx"),ot=e("sSZD"),et=e("wD+u");let it=(()=>{let t=class extends y.b{constructor(){super()}};return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=k.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t=Object(C.__decorate)([Object(y.h)({name:"products",resettable:!0})],t),t})(),nt=(()=>{class t{constructor(t,o,e,i){this.db=t,this.firestore=o,this.store=e,this.fun=i,this.url="/Product"}get(){return this.firestore.collection(this.url)}getAll(){return this.firestore.collection(this.url).snapshotChanges().forEach(t=>{const o=[];t.map(t=>{var e,i;return this.fitch(null===(i=null===(e=null==t?void 0:t.payload)||void 0===e?void 0:e.doc)||void 0===i?void 0:i.id).snapshotChanges().forEach(e=>{e.map(e=>{var i,n,l,c,r,a,s,d,u,f,b,p;0===o.filter(t=>{var o,i;return t.id===(null===(i=null===(o=e.payload)||void 0===o?void 0:o.doc)||void 0===i?void 0:i.id)}).length&&(o.push(Object.assign({id:null===(n=null===(i=e.payload)||void 0===i?void 0:i.doc)||void 0===n?void 0:n.id,category:null===(c=null===(l=null==t?void 0:t.payload)||void 0===l?void 0:l.doc)||void 0===c?void 0:c.id},null===(a=null===(r=e.payload)||void 0===r?void 0:r.doc)||void 0===a?void 0:a.data())),this.store.add(Object.assign({id:null===(d=null===(s=e.payload)||void 0===s?void 0:s.doc)||void 0===d?void 0:d.id,category:null===(f=null===(u=null==t?void 0:t.payload)||void 0===u?void 0:u.doc)||void 0===f?void 0:f.id},null===(p=null===(b=e.payload)||void 0===b?void 0:b.doc)||void 0===p?void 0:p.data())))})})})})}add(t,o=null){var e;delete t.id;const i=[],n=`${this.url}`;if((null===(e=null==t?void 0:t.image)||void 0===e?void 0:e.length)>0)return t.image.forEach((e,l)=>this.fun.storeToFirebase(e,this.url).then(e=>{if(i.push(e),l+1===t.image.length){t.image=i,t.created_at=(new Date).toISOString();const e=this.firestore.collection(n).doc(t.category);return e.set({Init:!0}),e.collection(t.category+"s").add(t).then(t=>{this.getAll(),this.fun.notify("Added"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)})}l++}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)}));{t.created_at=(new Date).toISOString();const e=this.firestore.collection(n).doc(t.category);return e.set({Init:!0}),e.collection(t.category+"s").add(t).then(t=>{this.getAll(),this.fun.notify("Added"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)})}}update(t,o,e=null){var i;delete o.id;let n=0;const l=[];return(null===(i=null==o?void 0:o.image)||void 0===i?void 0:i.length)>0?o.image.forEach((i,c)=>null==(null==i?void 0:i.url)?this.fun.storeToFirebase(i,this.url).then(i=>{if(l.push(i),n++,c+1===o.image.length)return o.image=l,this.firestore.collection(this.url).doc(o.category).collection(o.category+"s").doc(t).update(o).then(i=>{this.store.update(t,o),this.fun.notify("Updated"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)});c++}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)}):(l.push(null==i?void 0:i.url),0===n?(o.image=l,this.firestore.collection(this.url).doc(o.category).collection(o.category+"s").doc(t).update(o).then(i=>{this.store.update(t,o),this.fun.notify("Update"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})):void 0)):this.firestore.collection(this.url).doc(o.category).collection(o.category+"s").doc(t).update(o).then(i=>{this.store.update(t,o),this.fun.notify("Update"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})}delete(t,o=null){this.firestore.collection(this.url).doc(o).collection(o+"s").doc(t).delete(),this.getAll()}fitch(t){return this.firestore.collection(this.url).doc(t).collection(t+"s")}}return t.\u0275fac=function(o){return new(o||t)(k.ac(ot.a),k.ac(et.a),k.ac(it),k.ac(O.a))},t.\u0275prov=k.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lt=(()=>{let t=class extends y.f{constructor(t){super(t),this.store=t}};return t.\u0275fac=function(o){return new(o||t)(k.ac(it))},t.\u0275prov=k.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t=Object(C.__decorate)([Object(y.e)({sortBy:"id",sortByOrder:y.c.DESC})],t),t})();var ct=e("GaOe"),rt=e("H0VJ"),at=e("WLRH");let st=(()=>{class t{constructor(t,o,e,i,n){this.productService=t,this.productsQuery=o,this.fun=e,this.categoryService=i,this.dialogServices=n,this.caption="Products",this.columns=[{label:"Category",name:"category",sortable:!0},{label:"Image",name:"image",type:"image",sortable:!1},{label:"Created By",name:"user",sortable:!0},{label:"Status",name:"status",type:"status",sortable:!0}],this.actions=[{icon:"pencil",color:"warning",disable:!1},{icon:"trash",color:"danger"}],this.toolBarActions=[{position:"right",action:[]},{position:"left",action:[{label:"Create",icon:"plus",color:"",tooltip:null}]}],this.product$=this.productsQuery.selectAll(),this.loading$=this.productsQuery.selectLoading(),this.dialogConfig={width:"540px",formComponent:Y,service:this.productService}}ngOnInit(){this.fun.loader(this.loading$),this.productService.get().snapshotChanges().subscribe(()=>{this.productService.getAll()}),this.productService.getAll(),this.category=this.categoryService.get().valueChanges()}add(){this.dialogConfig.title="New product",this.dialogConfig.formData="",this.dialogConfig.lookupData={category:this.category},this.dialogServices.handleDialog(this.dialogConfig)}update(t){this.dialogConfig.title="Edit product",this.dialogConfig.formData=t,this.dialogConfig.lookupData={category:this.category},this.dialogServices.handleDialog(this.dialogConfig)}onActionClick(t){"pencil"===t.type?this.update(t.data):"trash"===t.type&&this.productService.delete(t.data.id,t.data.category).then(this.blockUI.stop())}onToolBarActionClick(t){"plus"===t&&this.add()}}return t.\u0275fac=function(o){return new(o||t)(k.Qb(nt),k.Qb(lt),k.Qb(O.a),k.Qb(ct.a),k.Qb(rt.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-product"]],decls:2,vars:10,consts:[[3,"caption","columns","data","actions","first","rows","sortBy","toolBarActions","buttonClick","toolBarButtonClick"]],template:function(t,o){1&t&&(k.Wb(0,"app-table-template",0),k.ec("buttonClick",function(t){return o.onActionClick(t)})("toolBarButtonClick",function(t){return o.onToolBarActionClick(t)}),k.ic(1,"async"),k.Vb()),2&t&&k.oc("caption",o.caption)("columns",o.columns)("data",k.jc(1,8,o.product$))("actions",o.actions)("first",(null==o.currentPage?null:o.currentPage.first)||0)("rows",(null==o.currentPage?null:o.currentPage.rows)||10)("sortBy",o.sortBy)("toolBarActions",o.toolBarActions)},directives:[at.a],pipes:[v.b],styles:[""]}),Object(C.__decorate)([Object(tt.a)()],t.prototype,"blockUI",void 0),t})();var dt=e("tyNb");const ut=[{path:"",component:st},{path:"**",redirectTo:""}];let ft=(()=>{class t{}return t.\u0275mod=k.Ob({type:t}),t.\u0275inj=k.Nb({factory:function(o){return new(o||t)},imports:[[dt.e.forChild(ut)],dt.e]}),t})(),bt=(()=>{class t{}return t.\u0275mod=k.Ob({type:t}),t.\u0275inj=k.Nb({factory:function(o){return new(o||t)},imports:[[v.c,ft,g.a,m.f,h.j,h.u,p.b,b.c,f.b,u.a,d.f,S.e,s.c,a.a,r.b,c.b,l.a,n.a,i.a]]}),t})()}}]);